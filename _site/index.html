<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>BeyondThunderdo.me</title>
    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">
    <link rel="shortcut icon" href="images/favicon.ico">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
    <div id="header">
        <nav>
            <li class="fork"><a href="/">BeyondThunderdo.me</a></li>
            <li class="fork"><a href="/archive/">Archive</a></li>
        </nav>
    </div><!-- end header -->



    <div class="wrapper">

                <section>

    <div id="title">
        <h1>BeyondThunderdo.me</h1>
        <p>I make things. Sometimes I post them here.</p>
    </div>

    <div style="display:table, width: 50%">
    <hr>

        <div class="personalDescription">
            <img src="/images/RobertOnBeach.png" title="Thanks, Emma Ross :)">
            <h3>Robert Butler</h3>
            Software Engineer<br>
            <a href="http://twistedoakstudios.com/">Twisted Oak Studios</a><br>
            <a href="https://twitter.com/BoTreats"><img src="/images/twitterIcon.png" class="iconLinkImage"></a>
            <a href="https://github.com/rbrt"><img src="/images/githubIcon.png" class="iconLinkImage"></a>
            <a href="https://ca.linkedin.com/pub/robert-butler/ab/ab9/753"><img src="/images/linkedinIcon.png" class="iconLinkImage"></a>
            <a href="mailto:robbutler902@gmail.com"><img src="/images/mailIcon.png" class="iconLinkImage"></a>
        </div>
    </div>


    
        <div class="post">
            <h2 id="drifting-game">Drifting Game</h2>
<h5>January 10 2017</h5>

<p>I’ve been playing a lot of Forza Horizon 3 since it came out last year, and it’s
a total blast. The events in the game aren’t so great, but just driving around
the “mini Australia” they’ve created is both entertaining and relaxing. What
I’ve really come to enjoy is drifting around the mountains and hills. The sound
of tires squealing, the trail of smoke, and the feeling of controlling the car
while it gets sideways is something I’ve been coming back to for months.</p>

<p>I wanted to try and capture that feeling and make a game that was about only that.
I started off by looking into Unity’s standard car asset. I was able to get some
interesting results after several hours of messing around with physics settings;
four wheel drive with reduced friction on the rear wheels seemed the let the car
slide around a lot. Unfortunately, even at the best settings I managed to find,
I found that the settings weren’t general. What worked for sliding would lead to
a car that could barely accelerate in a straight line. It would also be prone to
spinning out. I attempted to change between settings on the fly, but the handling
was still not something I was happy with.</p>

<p>Before continuing on any further, I had to make a little car and a mountain scene
to drive it around in. I wound up making a track by extruding a mesh along a path
in Blonder and applying a road texture to it, then I surrounded it with a bunch of
mountains.</p>

<p><img src="/images/2017/Jan/Mountains.png" /></p>

<p>After that, I took a stab at making a low poly AE86:</p>

<p><img src="/images/2017/Jan/AE86.png" /></p>

<p>Next up I tried slapping a rigidbody on my car and applying forces to it manually.
I found that applying torque to turn was heavily dependent on how much contact the
collider had with the ground, but applying forward momentum worked consistently well.
The solution I wound up utilizing was to apply force to the rigidbody, but then
to bypass physics for rotation and rotate the transform directly.</p>

<p>This actually feels pretty good, and the car can be adjusted to feel pretty different
(without being out of control) by tweaking max speed, acceleration, and turn speed.
Most importantly, the car is really drift-happy, which is exactly what I wanted.
I made a build and put it on my phone, and even though there wasn’t much to it,
it made me feel the same way I felt sliding around in Forza. I’m going to keep at
it.</p>

        </div>

    	<hr>
    
        <div class="post">
            <h2 id="transition-effect">Transition Effect</h2>
<h5>July 10 2016</h5>

<p>Wow, it’s been awhile since the last post! I hadn’t worked on my transition
effect much over the last few months due to a pretty hectic period at work, but
last week I got things solved and managed to make a fairly general package
that can be dropped into any project. The end result is this:</p>

<p><img src="/images/2016/July/TransitionDemonstration.gif" /></p>

<p>It’s a transition between two test scenes that both occupy the same space in
world coordinates, have different geometry, have different ambient light, have
different UI canvases, and have different scene lights. Despite neither scene
being particularly interesting, the GIF above demonstrates how all of the
information contained in each scene is preserved and nothing is rendered twice.</p>

<p>To achieve this effect, there are two main components used. The first is a
SceneTransitionObject, or STO, and the second is the TransitionController.</p>

<p>Any scene that we want to transition to or from needs an STO, and right now it needs
to be the root of all objects in the scene. This isn’t absolutely required, but
we would need to do an expensive FindObjectsOfType call instead of a
GetComponentsInChildren call if we didn’t follow this guideline. An STO has
references to all of the lights, cameras, canvases, and renderers in a scene and
in Awake it will figure out if it is the current STO, or the next STO. In other
words, is it the <em>from</em> or <em>to</em> STO in the transition? All of an STO’s cameras
are disabled and rendered manually every frame, which gives us total control
over what we’re displaying.</p>

<p>The TransitionController has two RenderTextures (from and to) and a camera that
is ultimately responsible for rendering everything in the game. It can either be
rendering the contents of the “from” STO, the “to” STO, or some combination of
the two. When a transition is invoked, a special shader is used to smoothly
transition from the “from” texture to the “to” texture. To do this, the shader
needs to support two textures, and take an interpolation value.
The transition controller in the scene view looks like this:</p>

<p><img src="/images/2016/July/RenderingQuad.png" /></p>

<p>A transition needs to be invoked when a new scene containing an STO is loaded
additively. The TransitionController will yield on the existence of a new STO,
and then it will use the following code to control individual rendering of each
scene once per frame:</p>

<p><img src="/images/2016/July/RenderTransitionFrameSample.png" /></p>

<p>What is happening here is as follows: We disable all of the renderers and lights
in the new scene, and then we call the current scene’s STO’s RenderFrame method.
This will trigger a render to our “from” RenderTexture. Then we turn on all of
the renderers and lights in the new scene, disable all of the renderers and lights
in the current scene, and render the contents of the next scene to the “to” RenderTexture.
This continues until the transition is done, at which point we set the “to” STO to
be the current one (or, the “from” STO), unload the previous scene, and resume
rendering only the “from” STO’s contents.</p>

<p>Using this technique, any shader that interpolates between textures can be inserted
and used to transition from gameplay to menu screens, gameplay to gameplay… or
whatever really. Here’s an example of it in action to transition from a title screen
to gameplay in a side project I’m occasionally hacking on:</p>

<p><img src="/images/2016/July/GameTransition.gif" /></p>

<p>I plan to make this available on the asset store or on GitHub or something
eventually. I just need to write up a bit of documentation and handle a few edge
cases.</p>

        </div>

    	<hr>
    
        <div class="post">
            <h2 id="whoops-actually-thats-alright">Whoops! Actually… That’s alright</h2>
<h5>March 9 2016</h5>

<p>I had a few recent posts about playing with Voronoi Diagrams lately in fullscreen
effects. The results were interesting, and pretty nonsensical. I’m at a point now
in my TOP SECRET project (Which I’ll probably post about after GDC) where I need
to be transitioning between different gameplay scenes. I was thinking that one
neat method of doing this might be to utilize that Voronoi work a little bit.</p>

<p>It isn’t really very hard to do; I’m just sampling an RGB noise texture for my
Voronoi points, and then colouring the cell with whatever the noise texture’s
colour is at the nearest sample point. The source looks like this:</p>

<p><img src="/images/2016/Mar/VoronoiSource.png" /></p>

<p>And the result, which is pretty plain, looks like this:</p>

<p><img src="/images/2016/Mar/VoronoiResult.png" /></p>

<p>But then I got distracted from the task of making something relevant to my side
project and decided to add some sine waves, because that’s usually what you do
when you write a fragment shader, and wound up with this:</p>

<p><img src="/images/2016/Mar/VoronoiContinued.gif" /></p>

<p>This was cool and looked more arty than anything I’ve done before lol, but I
thought it would be cool to try and add some texture. So, I then started trying to
colour things by their distance from the center of the cell. My implementation is
naive (read: wrong) but it produced this:</p>

<p><img src="/images/2016/Mar/VoronoiAccident.gif" /></p>

<p>Which I thought was pretty cool. So then I thought, what about if we added more
sines… and some cosines too? I couldn’t get the result to loop cleanly, but I
thought it looked nice anyway so here you go:</p>

<p><img src="/images/2016/Mar/VoronoiAccident2.gif" /></p>

<p>Programming shaders is fun! Now maybe I’ll come out of this with something to
actually use in my game…</p>

        </div>

    	<hr>
    
        <div class="post">
            <h2 id="blonder-chronicles">Blonder Chronicles</h2>
<h5>February 27 2016</h5>

<p>I’m pressing on with trying to figure out Blonder a bit more. I’ve been making a
prototype for a game lately (which I’ll probably post about soonish – I want to
have it ready for the next <a href="https://www.facebook.com/groups/halifaxgamecollective/">Halifax Game Collective</a> meetup.)
After I got basic gameplay out of the way, I decided to start making a character
because as it stands, everything in my game is a cube.</p>

<p>So I hopped into Blonder and modelled, rigged, and animated a humanoid-ish character:</p>

<p><img src="/images/2016/Feb/BlonderAnimation.png" /></p>

<p>I gave it 6 animations; an idle, a run, a jump, a fall, a landing, and one for
taking damage. I kept the starting and ending frames mostly uniform with the states
that the animations could transition in and out of so that blending would go nicely.
I then brought it into Unity and made a pretty straightforward state machine to
control it, and set up the transitions to blend appropriately.</p>

<p><img src="/images/2016/Feb/StateMachine.png" /></p>

<p>I already have the code dictating all of these behaviours done up, so hooking my
player controller up to the animator should be pretty straightforward. From here
I want to model an enemy or two, and then start working on the terrain and scenery
for the game. As I have the basic game loop established (menu, gameplay, death)
and a scoring system, I think that adding some pretty basic art will help it feel
a lot better. The following gif doesn’t show all the animations, but it shows the
transition from running to jumping to falling to landing:</p>

<p><img src="/images/2016/Feb/RunJumpFall.gif" /></p>

        </div>

    	<hr>
    
        <div class="post">
            <h2 id="data-ghost">DATA GHOST</h2>
<h5>February 20 2016</h5>

<p>I don’t know where the DATA GHOST came from, but once the idea was there, it had
to be made. I made the ghost by creating a cyclical curve in Blonder</p>

<p><img src="/images/2016/Feb/Blonder.png" style="max-width:50%;" />
<img src="/images/2016/Feb/BlonderGhost.png" /></p>

<p>and then converting it to a mesh. I’ve got a vertex shader handling the mouth and “feet”
of the ghost, and the trail is a combination of two dense line renderers and a
particle system.</p>

<p>To get the squares to transition into 1’s and 0’s, I have a single
128x64 texture that has a 1 on one half and a 0 on the other. Initially the particles
are randomly given a vertex colour of either black or white. When the particles
cross a certain point in space relative to the ghost, I blend between a solid colour
and half of the 1/0 texture. I get either a 1 or a 0 by using the particle’s vertex
colour to offset the UVs and only grab half of the texture.</p>

<p><img src="/images/2016/Feb/GhostParticleShader.png" /></p>

<p>The background is a scrolling grid rendered in a fragment shader, not much going
on there except for some fog support to display the INFINITE VOID.</p>

<p>The text is appearing on screen by just using randomish offsets in a coroutine to
simulate a typing delay, and moving the cursor image based on the length of text.</p>

<p><img src="/images/2016/Feb/DataGhost.gif" /></p>

        </div>

    	<hr>
    

    <a href="/archive/"><h1 style="text-align:center; margin-top:5%;">Older Posts</h1></a>



</section>


    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-53820142-1', 'auto');
        ga('send', 'pageview');
    </script>
  </body>
</html>
