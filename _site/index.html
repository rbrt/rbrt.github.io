<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>BeyondThunderdo.me</title>
    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">
    <link rel="shortcut icon" href="images/favicon.ico">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
    <div id="header">
        <nav>
            <li class="fork"><a href="/">BeyondThunderdo.me</a></li>
            <li class="fork"><a href="/archive/">Archive</a></li>
        </nav>
    </div><!-- end header -->



    <div class="wrapper">

                <section>

    <div id="title">
        <h1>BeyondThunderdo.me</h1>
        <p>I make things. Sometimes I post them here.</p>
    </div>

    <div style="display:table, width: 50%">
    <hr>

        <div class="personalDescription">
            <img src="/images/RobertOnBeach.png" title="Thanks, Emma Ross :)">
            <h3>Robert Butler</h3>
            Software Engineer<br>
            <a href="http://twistedoakstudios.com/">Twisted Oak Studios</a><br>
            <a href="https://twitter.com/BoTreats"><img src="/images/twitterIcon.png" class="iconLinkImage"></a>
            <a href="https://github.com/rbrt"><img src="/images/githubIcon.png" class="iconLinkImage"></a>
            <a href="https://ca.linkedin.com/pub/robert-butler/ab/ab9/753"><img src="/images/linkedinIcon.png" class="iconLinkImage"></a>
            <a href="mailto:robbutler902@gmail.com"><img src="/images/mailIcon.png" class="iconLinkImage"></a>
        </div>
    </div>


    
        <div class="post">
            <h2 id="track-tool">Track Tool</h2>
<h5>January 25 2017</h5>

<p>I made the track I’ve been using for testing by creating a path in Blonder, creating
an extrusion shape, extruding that along the path, and converting it to a mesh. I
thought that I might create some standard objects in Blonder to help try and establish
a pipeline for creating track segments, but I thought it would be more ideal to have
something that I could utilize right in Unity. By making a few tools for the engine,
I’d be able to edit tracks directly in scenes, have access to the spline and point
orientation data for any purpose, and I’d get to write editor scripts.</p>

<p>Fortunately, I saw a talk at Unite Boston two years ago that covered a large
chunk of this work: <a href="https://www.youtube.com/watch?v=o9RK6O2kOKo">A coder’s guide to spline-based procedural geometry.</a>
It doesn’t provide complete code, and some of the provided code needed some massaging
to function properly, but it helped me get the generation of a mesh based on an
extrusion shape and a spline working quickly.</p>

<p>After getting that in order, I started converting it and wrapping it with an editor
tool. So far, I can add/remove spline segments and edit their points and tangents. Doing
this updates the mesh and its MeshCollider in real time so that I can see how the changes
look, and also immediately test them with my car.</p>

<p><img src="/images/2017/Jan/TrackTool.gif" /></p>

<p>I can bake the segments down into a single track, or bake them into individual segments.
I’m not sure how much performance is going to be a concern at this point, but even
if large tracks work out nicely with respect to framerate, the idea of having reusable
smaller segments appeals to me too. The baked tracks are ScriptableObjects with their
curve information exposed. Presently I’m just using this to place road signs along
the edge of turns, but I’d like to use that information to blend mountains and other
scenery into the edge of the track.</p>

<p>More immediate next steps for this tool are to add better UV scaling which accounts
for curves, which the talk linked above goes into. The tool also doesn’t handle
rotation of points and tangents on the segment curves which are going to be important.
Another near-future feature will be a visualization for how intense curves are,
so help me eyeball difficult segments without needing to drive the track.</p>

<p><img src="/images/2017/Jan/CarOnGeneratedTrack.gif" /></p>

        </div>

    	<hr>
    
        <div class="post">
            <h2 id="forest-drive">Forest Drive</h2>
<h5>January 22 2017</h5>

<p>This weekend I’ve been getting over a pretty rough cold, but I’ve just been
continuing to work on <i>Mountain Drift</i>. For whatever reason, I’ve been
really motivated to keep working on this project, so I decided to keep riding that
momentum.</p>

<p>Originally for my smoke, I was using sphere mesh particles with an additive particle
shader, and this was killing performance all the time. It was fine for a first pass,
but I needed to do something about it. In keeping with the low poly art style, I
hopped into Blonder and made a smoke mesh:</p>

<p><img src="/images/2017/Jan/SmokeMesh.png" /></p>

<p>Because this has a decent shape to it, I can use a shader that doesn’t do any alpha
blending. As soon as I made this change to my smoke particles, performance was no
longer a problem. I think I like the resulting effect more too, but this probably
isn’t the final pass.</p>

<p><img src="/images/2017/Jan/NewSmoke.gif" /></p>

<p>I also extended the track and added a finish line. At the base of the mountain,
there is the beginnings of a forest. I really want to look into various solutions
for creating nice backgrounds; I’d like to have a distant city, mountain ranges,
or a seemingly infinite forest and none of those are things I’ve tackled before.
For now, this is what the finish line looks like:</p>

<p><img src="/images/2017/Jan/Finish.gif" /></p>

        </div>

    	<hr>
    
        <div class="post">
            <h2 id="organization">Organization</h2>
<h5>January 18 2017</h5>

<p>For awhile now, I’ve been using <a href="https://trello.com/">Trello</a> for personal projects to help me stay
organized. I find that using anything is beneficial to help stay on track, as
it’s really easy otherwise to forget about something you noticed, or just not be
sure what to do next after completing a task. I used to keep lists, and at work
we use JIRA, but lists get really messy and JIRA is just overkill. Trello really
doesn’t scale well. At my last job we used it and it became very easy to lose track
of issues and it’s tedious to group tasks for sprints. However, for personal
projects, it’s great.</p>

<p><img src="/images/2017/Jan/Trello.gif" /></p>

<p>I set up different columns for each category of task that I can think of, and I
keep a “DONE” pile at the very beginning of my board. Keeping that list of
finished cards is a nice reminder of what’s been done lately, and it just feels
good to move tasks over there as they’re completed.</p>

<p>Beyond just keeping track of what needs to be done, I find it really useful to
be able to leave notes to myself for things to try. If I’m in the middle of
something and notice a gameplay tweak or art change that’s unrelated to what I’m
doing, it’s nice to be able to leave a quick note to myself in the relevant column
so I can remember to look into it later.</p>

<p>I also really like being able to attach images to cards, because I have a whiteboard
in my office at home, and I find this is a really nice way to keep whatever I draw
there organized and archived. Then I can clear my whiteboard without having to worry
about erasing something important.</p>

<p><img src="/images/2017/Jan/WhiteboardTrello.png" /></p>

        </div>

    	<hr>
    
        <div class="post">
            <h2 id="mountain-drift">Mountain Drift</h2>
<h5>January 17 2017</h5>

<p>I’ve worked a bit more on the drifting game, and I now have a tentative title:</p>

<p><img src="/images/2017/Jan/MountainDrift.gif" /></p>

<p>I’ve done a bit of menu work, created a system for recording and playing back
replays, created that title screen, added a system for detecting and scoring drifts,
added destructible objects, made the car explode when you fly off the road, and
added some first pass smoke effects.</p>

<p>For the menu, I took the approach of having multiple Canvases for different contexts
that are all managed by a top level object. This object can smoothly transition
between menus as the game goes from the title, to gameplay, to failure, and so on.
I made a utility component that will ensure that certain objects on a prefab are
always enabled when you apply changes to the prefab. This is useful on the menu
so that I can disable all of the other canvases to work on one at a time, and not
worry about accidentally saving disabled canvases. If I didn’t take this approach,
this is what I would be working with:</p>

<p><img src="/images/2017/Jan/Menus.png" /></p>

<p>For replays, I made a component that you can place on a car, and then it will
record the transform’s position and rotation at every frame. It also records whether
or not the tires are smoking, and can be extended to record other necessary data
pretty easily. The data is stored in a ScriptableObject for now, but I’m going to
serialize it in a different manner if I wind up making an in-game record replay
feature. To play it back, a similar component is placed on a stripped down car
object, and then all of the recorded info is played back each frame. I used it to
make the title sequence at the top of this post.</p>

<p>For detecting drifts, I’m just looking at the direction the car is traveling and
comparing it against the car’s forward vector. I’m combining this information with
the speed at which the car is traveling, and using it to provide a “drift intensity”
that is used to determine when effects like smoke and skid marks should be enabled,
and also what score multipliers to apply.</p>

<p><img src="/images/2017/Jan/DriftScore.gif" /></p>

        </div>

    	<hr>
    
        <div class="post">
            <h2 id="drifting-game">Drifting Game</h2>
<h5>January 10 2017</h5>

<p>I’ve been playing a lot of Forza Horizon 3 since it came out last year, and it’s
a total blast. The events in the game aren’t so great, but just driving around
the “mini Australia” they’ve created is both entertaining and relaxing. What
I’ve really come to enjoy is drifting around the mountains and hills. The sound
of tires squealing, the trail of smoke, and the feeling of controlling the car
while it gets sideways is something I’ve been coming back to for months.</p>

<p>I wanted to try and capture that feeling and make a game that was about only that.
I started off by looking into Unity’s standard car asset. I was able to get some
interesting results after several hours of messing around with physics settings;
four wheel drive with reduced friction on the rear wheels seemed the let the car
slide around a lot. Unfortunately, even at the best settings I managed to find,
I found that the settings weren’t general. What worked for sliding would lead to
a car that could barely accelerate in a straight line. It would also be prone to
spinning out. I attempted to change between settings on the fly, but the handling
was still not something I was happy with.</p>

<p>Before continuing on any further, I had to make a little car and a mountain scene
to drive it around in. I wound up making a track by extruding a mesh along a path
in Blonder and applying a road texture to it, then I surrounded it with a bunch of
mountains.</p>

<p><img src="/images/2017/Jan/Mountains.png" /></p>

<p>After that, I took a stab at making a low poly AE86:</p>

<p><img src="/images/2017/Jan/AE86.png" /></p>

<p>Next up I tried slapping a rigidbody on my car and applying forces to it manually.
I found that applying torque to turn was heavily dependent on how much contact the
collider had with the ground, but applying forward momentum worked consistently well.
The solution I wound up utilizing was to apply force to the rigidbody, but then
to bypass physics for rotation and rotate the transform directly.</p>

<p>This actually feels pretty good, and the car can be adjusted to feel pretty different
(without being out of control) by tweaking max speed, acceleration, and turn speed.
Most importantly, the car is really drift-happy, which is exactly what I wanted.
I made a build and put it on my phone, and even though there wasn’t much to it,
it made me feel the same way I felt sliding around in Forza. I’m going to keep at
it.</p>

        </div>

    	<hr>
    

    <a href="/archive/"><h1 style="text-align:center; margin-top:5%;">Older Posts</h1></a>



</section>


    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-53820142-1', 'auto');
        ga('send', 'pageview');
    </script>
  </body>
</html>
